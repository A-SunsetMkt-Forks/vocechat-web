"use strict";(globalThis.webpackChunkvocechat_web=globalThis.webpackChunkvocechat_web||[]).push([[888],{746:(e,t,i)=>{i.d(t,{Z:()=>r});var l,n=i(7313);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},a.apply(this,arguments)}const s=(e,t)=>{let{title:i,titleId:s,...r}=e;return n.createElement("svg",a({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},r),i?n.createElement("title",{id:s},i):null,l||(l=n.createElement("path",{d:"M5 7.5L10 12.5L15 7.5",stroke:"#344054",strokeWidth:1.67,strokeLinecap:"round",strokeLinejoin:"round"})))},r=(0,n.forwardRef)(s)},552:(e,t,i)=>{i.d(t,{Z:()=>o});var l,n,a=i(7313);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},s.apply(this,arguments)}const r=(e,t)=>{let{title:i,titleId:r,...o}=e;return a.createElement("svg",s({width:16,height:12,viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},o),i?a.createElement("title",{id:r},i):null,l||(l=a.createElement("g",{clipPath:"url(#clip0_9046_23916)"},a.createElement("path",{d:"M4.93942 9.69781L1.62578 6.38648C1.25336 6.01431 0.651746 6.01431 0.27932 6.38648C-0.0931066 6.75865 -0.0931066 7.35984 0.27932 7.73201L4.27096 11.7209C4.64339 12.093 5.245 12.093 5.61743 11.7209L15.7207 1.62465C16.0931 1.25248 16.0931 0.651292 15.7207 0.279125C15.3483 -0.0930417 14.7466 -0.0930417 14.3742 0.279125L4.93942 9.69781Z",fill:"#78787C"}))),n||(n=a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_9046_23916"},a.createElement("rect",{width:16,height:12,fill:"white"})))))},o=(0,a.forwardRef)(r)},7888:(e,t,i)=>{i.r(t),i.d(t,{default:()=>je});var l=i(7313),n=i(6952),a=i.n(n),s=i(9184);const r=s.ZP.div`
  height: 100vh;
  overflow-y: scroll;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  background-color: #fff;
  margin: 8px 24px 10px 0;
  border-radius: 16px;
  .opts {
    padding: 20px 16px;
    display: flex;
    justify-content: space-between;
    width: 100%;
  }
  > .list {
    padding: 0 16px;
    height: 100%;
    overflow-y: scroll;
    width: 100%;
    display: flex;
    &.item {
      gap: 8px;
      flex-direction: column;
    }
    &.grid {
      flex-direction: row;
      flex-wrap: wrap;
      > .file_box {
        flex-direction: column;
        /* margin-right: 8px; */
        margin-bottom: 8px;
      }
    }
  }
`;var o,c=i(7935),d=i(3709),p=i(5878);function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},x.apply(this,arguments)}const h=(e,t)=>{let{title:i,titleId:n,...a}=e;return l.createElement("svg",x({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},a),i?l.createElement("title",{id:n},i):null,o||(o=l.createElement("path",{d:"M2 3.75C2 3.33579 2.33579 3 2.75 3H10.25C10.6642 3 11 3.33579 11 3.75C11 4.16421 10.6642 4.5 10.25 4.5H2.75C2.33579 4.5 2 4.16421 2 3.75ZM2 11.75C2 11.3358 2.33579 11 2.75 11H9.25C9.66421 11 10 11.3358 10 11.75C10 12.1642 9.66421 12.5 9.25 12.5H2.75C2.33579 12.5 2 12.1642 2 11.75ZM2.75 7C2.33579 7 2 7.33579 2 7.75C2 8.16421 2.33579 8.5 2.75 8.5H13.25C13.6642 8.5 14 8.16421 14 7.75C14 7.33579 13.6642 7 13.25 7H2.75Z",fill:"#344054"})))},u=(0,l.forwardRef)(h);var f;function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},m.apply(this,arguments)}const g=(e,t)=>{let{title:i,titleId:n,...a}=e;return l.createElement("svg",m({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},a),i?l.createElement("title",{id:n},i):null,f||(f=l.createElement("path",{d:"M3.5 2C2.67157 2 2 2.67157 2 3.5V5.5C2 6.32843 2.67157 7 3.5 7H5.5C6.32843 7 7 6.32843 7 5.5V3.5C7 2.67157 6.32843 2 5.5 2H3.5ZM10.5 2C9.67157 2 9 2.67157 9 3.5V5.5C9 6.32843 9.67157 7 10.5 7H12.5C13.3284 7 14 6.32843 14 5.5V3.5C14 2.67157 13.3284 2 12.5 2H10.5ZM3.5 9C2.67157 9 2 9.67157 2 10.5V12.5C2 13.3284 2.67157 14 3.5 14H5.5C6.32843 14 7 13.3284 7 12.5V10.5C7 9.67157 6.32843 9 5.5 9H3.5ZM10.5 9C9.67157 9 9 9.67157 9 10.5V12.5C9 13.3284 9.67157 14 10.5 14H12.5C13.3284 14 14 13.3284 14 12.5V10.5C14 9.67157 13.3284 9 12.5 9H10.5Z",fill:"#344054"})))},b=(0,l.forwardRef)(g);var v=i(6417);const w=s.ZP.ul`
  display: flex;
  border: 1px solid #d0d5dd;
  box-shadow: 0 1px 2px rgba(16, 24, 40, 0.05);
  border-radius: 8px;
  box-sizing: border-box;

  .view {
    cursor: pointer;
    padding: 8px;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  &.item .item,
  &.grid .grid {
    border: 1px solid #52edff;
    box-shadow: 0 1px 2px rgba(16, 24, 40, 0.05);
    border-radius: 8px;
    svg {
      transition: all 0.2s ease;
      path {
        fill: #52edff;
      }
    }
  }
`;function j(e){let{view:t=c.kO.item}=e;const i=(0,d.I0)(),l=e=>{const{view:l}=e.currentTarget.dataset;l!=t&&i((0,p.In)(t==c.kO.item?c.kO.grid:c.kO.item))};return(0,v.jsxs)(w,{className:t,children:[(0,v.jsx)("li",{className:"view item","data-view":c.kO.item,onClick:l,children:(0,v.jsx)(u,{})}),(0,v.jsx)("li",{className:"view grid","data-view":c.kO.grid,onClick:l,children:(0,v.jsx)(b,{})})]})}var y=i(562);const k=s.ZP.div`
  width: 100%;
  padding: 6px 16px;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);
  &.embed {
    padding: 6px 8px;
    box-shadow: none;
  }
  .search {
    outline: none;
    background-color: rgba(0, 0, 0, 0.08);
    border-radius: 25px;
    padding: 10px 8px 10px 36px;
    color: #a1a1aa;
    font-weight: 400;
    font-size: 14px;
    line-height: 20px;
    background-image: url(${y});
    background-repeat: no-repeat;
    background-position: 8px center;
  }
`,N=e=>{let{value:t="",updateSearchValue:i=null,embed:l=!1}=e;return(0,v.jsx)(k,{className:l?"embed":"",children:(0,v.jsx)("input",{value:t,onChange:e=>{i&&i(e.target.value)},className:"search",placeholder:"Search..."})})};var C=i(2963),Z=i(1590),O=i(552);const P=s.ZP.div`
  padding: 12px;
  background: #ffffff;
  min-width: 200px;
  /* max-height: 230px; */
  overflow: auto;
  box-shadow: 0px 24px 48px -12px rgba(16, 24, 40, 0.18);
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  position: relative;
  > .list {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 16px;
    .date {
      position: relative;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 16px;
      color: #616161;
      font-weight: 600;
      font-size: 14px;
      line-height: 20px;
      .check {
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
      }
    }
  }
`,_={today:{title:"Today",duration:2222},in7d:{title:"Last 7 Days"},in30d:{title:"Last 30 Days"},in3m:{title:"Last 3 months"},in12m:{title:"Last 12 months"}};function M(e){let{select:t="",updateFilter:i}=e;const l=e=>{i({date:e})};return(0,v.jsx)(P,{children:(0,v.jsxs)("ul",{className:"list",children:[(0,v.jsxs)("li",{className:"date",onClick:l.bind(null,void 0),children:["Any Time",!t&&(0,v.jsx)(O.Z,{className:"check"})]}),Object.entries(_).map((e=>{let[i,{title:n}]=e;return(0,v.jsxs)("li",{className:"date",onClick:l.bind(null,i),children:[n,t==i&&(0,v.jsx)(O.Z,{className:"check"})]},n)}))]})})}var z=i(1742),E=i(2479);const L=s.ZP.div`
  padding: 0 4px 4px 4px;
  background: #ffffff;
  max-height: 300px;
  overflow: auto;
  box-shadow: 0 24px 48px -12px rgba(16, 24, 40, 0.18);
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  position: relative;
  > .search {
    z-index: 1;
    background-color: #fff;
    position: sticky;
    top: 0;
    input {
      z-index: 2;
    }
  }
  > .list {
    width: 100%;
    display: flex;
    flex-direction: column;
    .user {
      position: relative;
      cursor: pointer;
      &.none {
        padding: 10px;
        font-weight: 600;
        font-size: 14px;
        line-height: 20px;
        color: #616161;
      }
      .check {
        position: absolute;
        right: 6px;
        top: 50%;
        transform: translateY(-50%);
      }
    }
  }
`;function H(e){let{select:t="",updateFilter:i}=e;const{input:l,updateInput:n,users:a}=(0,E.Z)(),s=e=>{i({from:e})};return(0,v.jsxs)(L,{children:[(0,v.jsx)("div",{className:"search",children:(0,v.jsx)(N,{embed:!0,value:l,updateSearchValue:n})}),(0,v.jsxs)("ul",{className:"list",children:[(0,v.jsxs)("li",{className:"user none",onClick:s.bind(null,void 0),children:["Anyone",!t&&(0,v.jsx)(O.Z,{className:"check"})]}),a.map((e=>{let{uid:i}=e;return(0,v.jsxs)("li",{className:"user",onClick:s.bind(null,i),children:[(0,v.jsx)(z.Z,{uid:i,interactive:!0}),t==i&&(0,v.jsx)(O.Z,{className:"check"})]},i)}))]})]})}var I=i(6365),V=i(1769);const F=s.ZP.div`
  padding: 0 4px 4px 4px;
  background: #ffffff;
  max-height: 400px;
  overflow: auto;
  box-shadow: 0 24px 48px -12px rgba(16, 24, 40, 0.18);
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  position: relative;
  > .search {
    z-index: 1;
    background-color: #fff;
    position: sticky;
    top: 0;
    input {
      z-index: 2;
    }
  }
  > .list {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding: 8px;
    .channel {
      position: relative;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      .name {
        color: #616161;
        font-weight: 600;
        font-size: 14px;
        line-height: 20px;
      }
      .check {
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
      }
    }
  }
`;function $(e){let{select:t="",updateFilter:i}=e;const{input:l,updateInput:n,channels:a}=(0,V.Z)(),s=e=>{i({channel:e})};return(0,v.jsxs)(F,{children:[(0,v.jsx)("div",{className:"search",children:(0,v.jsx)(N,{embed:!0,value:l,updateSearchValue:n})}),(0,v.jsxs)("ul",{className:"list",children:[(0,v.jsxs)("li",{className:"channel",onClick:s.bind(null,void 0),children:[(0,v.jsx)(I.Z,{}),(0,v.jsx)("span",{className:"name",children:"Any Channel"}),!t&&(0,v.jsx)(O.Z,{className:"check"})]}),a.map((e=>{let{gid:i,is_public:l,name:n}=e;return(0,v.jsxs)("li",{className:"channel",onClick:s.bind(null,i),children:[(0,v.jsx)(I.Z,{personal:!l}),(0,v.jsx)("span",{className:"name",children:n}),t==i&&(0,v.jsx)(O.Z,{className:"check"})]},i)}))]})]})}var S=i(9926),R=i(7811),T=i(6863),A=i(4434),B=i(6248),D=i(4012),Y=i(4716);const G=s.ZP.div`
  padding: 12px;
  background: #ffffff;
  min-width: 200px;
  overflow: auto;
  box-shadow: 0 24px 48px -12px rgba(16, 24, 40, 0.18);
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  position: relative;
  > .list {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 16px;
    .type {
      position: relative;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      font-size: 14px;
      line-height: 20px;
      color: #475467;
      .icon {
        width: 15px;
        height: auto;
      }
      .check {
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
      }
    }
  }
`,W={doc:{title:"Documents",icon:(0,v.jsx)(B.Z,{className:"icon"})},pdf:{title:"PDFs",icon:(0,v.jsx)(S.Z,{className:"icon"})},image:{title:"Images",icon:(0,v.jsx)(Y.Z,{className:"icon"})},audio:{title:"Audio",icon:(0,v.jsx)(R.Z,{className:"icon"})},video:{title:"Videos",icon:(0,v.jsx)(T.Z,{className:"icon"})},code:{title:"Code Snippets",icon:(0,v.jsx)(D.Z,{className:"icon"})},unknown:{title:"Unknown Files",icon:(0,v.jsx)(A.Z,{className:"icon"})}};function U(e){let{select:t="",updateFilter:i}=e;const l=e=>{i({type:e})};return(0,v.jsx)(G,{children:(0,v.jsxs)("ul",{className:"list",children:[(0,v.jsxs)("li",{className:"type",onClick:l.bind(null,void 0),children:["Any Type",!t&&(0,v.jsx)(O.Z,{className:"check"})]}),Object.entries(W).map((e=>{let[i,{title:n,icon:a}]=e;return(0,v.jsxs)("li",{className:"type",onClick:l.bind(null,i),children:[a," ",n,t==i&&(0,v.jsx)(O.Z,{className:"check"})]},n)}))]})})}var q=i(746),J=i(4025);const K=s.ZP.div`
  /* padding: 20px 0; */
  display: flex;
  align-items: center;
  gap: 8px;
  .filter {
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    border: 1px solid #d0d5dd;
    box-sizing: border-box;
    box-shadow: 0 1px 2px rgba(16, 24, 40, 0.05);
    border-radius: var(--br);
    padding: 7px 12px;
    font-weight: 500;
    font-size: 12px;
    line-height: 18px;
    &.selected {
      border: none;
      color: #fff;
      background-color: #22ccee;
      .arrow path {
        stroke: #fff;
      }
    }
    .avatar {
      width: 16px;
      height: 16px;
      border-radius: 50%;
    }
  }
`;function Q(e){let{filter:t,updateFilter:i}=e;const[n,a]=(0,l.useState)({channel:!1,date:!1,from:!1,type:!1}),s=e=>{a((t=>({...t,...e})))},r=e=>{i(e);let t=Object.keys(e)[0];s({[t]:!1})},{userMap:o,channelMap:c}=(0,J.CG)((e=>({userMap:e.users.byId,channelMap:e.channels.byId}))),{from:d,channel:p,type:x,date:h}=t,{channel:u,date:f,type:m,from:g}=n;return(0,v.jsxs)(K,{children:[(0,v.jsx)(C.ZP,{interactive:!0,onClickOutside:s.bind(null,{from:!1}),visible:g,placement:"bottom-start",content:(0,v.jsx)(H,{select:t.from,updateFilter:r}),children:(0,v.jsxs)("div",{className:`filter ${d&&"selected"}`,onClick:s.bind(null,{from:!0}),children:[d&&(0,v.jsx)(Z.Z,{className:"avatar",name:o[d].name,url:o[d].avatar}),(0,v.jsxs)("span",{className:"txt",children:["From ",d&&o[d].name]}),(0,v.jsx)(q.Z,{className:"arrow"})]})}),(0,v.jsx)(C.ZP,{interactive:!0,onClickOutside:s.bind(null,{channel:!1}),visible:u,placement:"bottom-start",content:(0,v.jsx)($,{select:t.channel,updateFilter:r}),children:(0,v.jsxs)("div",{className:`filter ${p&&"selected"}`,onClick:s.bind(null,{channel:!0}),children:[(0,v.jsx)("span",{className:"txt",children:p?`In ${c[p].name}`:"Channel"}),(0,v.jsx)(q.Z,{className:"arrow"})]})}),(0,v.jsx)(C.ZP,{interactive:!0,onClickOutside:s.bind(null,{type:!1}),visible:m,placement:"bottom-start",content:(0,v.jsx)(U,{select:t.type,updateFilter:r}),children:(0,v.jsxs)("div",{className:`filter ${x&&"selected"}`,onClick:s.bind(null,{type:!0}),children:[(0,v.jsx)("span",{className:"txt",children:x?W[x].title:"Type"}),(0,v.jsx)(q.Z,{className:"arrow"})]})}),(0,v.jsx)(C.ZP,{interactive:!0,onClickOutside:s.bind(null,{date:!1}),visible:f,placement:"bottom-start",content:(0,v.jsx)(M,{select:t.date,updateFilter:r}),children:(0,v.jsxs)("div",{className:`filter ${h&&"selected"}`,onClick:s.bind(null,{date:!0}),children:[(0,v.jsx)("span",{className:"txt",children:h?_[h].title:"Date"}),(0,v.jsx)(q.Z,{className:"arrow"})]})})]})}var X=i(658),ee=i.n(X),te=i(9694),ie=i.n(te);const le=s.ZP.div`
  background: #f3f4f6;
  border: 1px solid #d4d4d4;
  box-sizing: border-box;
  border-radius: 6px;
  width: 370px;
  height: 66px;
  /* height: fit-content; */
  * {
    user-select: text;
  }
  &.flex {
    width: 100%;
  }
  &.preview {
    position: relative;
    overflow: hidden;
    height: 281px;
    &.audio {
      height: 125px;
    }
  }
  .basic {
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    .icon {
      width: 36px;
      height: 48px;
    }
    .info {
      display: flex;
      flex-direction: column;
      gap: 4px;
      width: 100%;
      overflow: hidden;
      .name {
        font-weight: 600;
        font-size: 14px;
        line-height: 20px;
        color: #1c1c1e;
        white-space: nowrap;
        text-overflow: ellipsis;
      }
      .details {
        font-weight: 400;
        font-size: 12px;
        line-height: 18px;
        color: #616161;
        display: flex;
        gap: 16px;
        .from strong {
          font-weight: bold;
        }
      }
    }
    .download {
      white-space: nowrap;
    }
  }
  .preview {
    height: calc(100% - 64px);
    overflow: hidden;
    /* todo */
  }
`,ne=s.ZP.div`
  height: 218px;
  video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
`,ae=e=>{let{url:t}=e;return(0,v.jsx)(ne,{children:(0,v.jsx)("video",{controls:!0,src:t})})},se=s.ZP.div`
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  .err {
    padding: 18px;
    /* font-weight: bold; */
    font-size: 16px;
    color: #999;
  }
  audio {
    width: 100%;
  }
`,re=e=>{let{url:t}=e;const[i,n]=(0,l.useState)(!1);return t?(0,v.jsx)(se,{children:i?(0,v.jsx)("div",{className:"err",children:"Unable to play this audio"}):(0,v.jsx)("audio",{controls:!0,src:t,onError:e=>{n(!0)}})}):null},oe=s.ZP.div`
  height: 218px;
  overflow: hidden;
  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
`,ce=e=>{let{url:t,alt:i}=e;return t?(0,v.jsx)(oe,{children:(0,v.jsx)("img",{src:t,alt:i})}):null},de=s.ZP.div`
  padding: 8px;
  /* height: 218px; */
  overflow: hidden;
  embed {
    width: 100%;
    height: 100%;
  }
`,pe=e=>{let{url:t}=e;return(0,v.jsx)(de,{children:(0,v.jsx)("embed",{src:t,type:"application/pdf"})})},xe=s.ZP.div`
  height: 218px;
  padding: 15px 15px 0 15px;
  line-height: 1.4;
  overflow: scroll;
  white-space: pre-wrap;
  word-break: break-all;
  background-color: #000;
  color: #eee;
`,he=e=>{let{url:t}=e;const[i,n]=(0,l.useState)("");return(0,l.useEffect)((()=>{(async e=>{if(!e)return;const t=await fetch(e),i=await t.text();n(i)})(t)}),[t]),i?(0,v.jsx)(xe,{children:i}):null},ue=s.ZP.div`
  background-color: #fff;
  height: 218px;
  padding: 15px 15px 0 15px;
  line-height: 1.4;
  overflow: scroll;
  white-space: pre-wrap;
  word-break: break-all;
`,fe=e=>{let{url:t}=e;const[i,n]=(0,l.useState)("");return(0,l.useEffect)((()=>{(async e=>{if(!e)return;const t=await fetch(e),i=await t.text();n(i)})(t)}),[t]),i?(0,v.jsx)(ue,{children:i}):null};var me=i(7990),ge=i(6544);ee().extend(ie());const be=e=>{let{preview:t,flex:i,file_type:l,name:n,size:a,created_at:s,from_uid:r,content:o}=e;const c=(0,J.CG)((e=>e.users.byId[r])),d=(0,me.LP)(l,n);if(!o||!c||!n)return null;const p=(e=>{const{file_type:t,name:i,content:l}=e;let n=null;const a={image:/^image/gi,audio:/^audio/gi,video:/^video/gi,code:/(json|javascript|java|rb|c|php|xml|css|html)$/gi,doc:/^text/gi,pdf:/\/pdf$/gi},s=i.split("."),r=t||s[s.length-1];switch(!0){case a.image.test(r):n=(0,v.jsx)(ce,{url:l});break;case a.pdf.test(r):n=(0,v.jsx)(pe,{url:l});break;case a.code.test(r):n=(0,v.jsx)(he,{url:l});break;case a.doc.test(r):n=(0,v.jsx)(fe,{url:l});break;case a.audio.test(r):n=(0,v.jsx)(re,{url:l});break;case a.video.test(r):n=(0,v.jsx)(ae,{url:l})}return n})({file_type:l,content:o,name:n}),x=t&&p;return(0,v.jsxs)(le,{className:`file_box ${i?"flex":""} ${x?"preview":""} ${l.startsWith("audio")?"audio":""}`,children:[(0,v.jsxs)("div",{className:"basic",children:[d,(0,v.jsxs)("div",{className:"info",children:[(0,v.jsx)("span",{className:"name",children:n}),(0,v.jsxs)("span",{className:"details",children:[(0,v.jsx)("i",{className:"size",children:(0,me.td)(a)}),(0,v.jsx)("i",{className:"time",children:ee()(s).fromNow()}),(0,v.jsxs)("i",{className:"from",children:["by ",(0,v.jsx)("strong",{children:c.name})]})]})]}),(0,v.jsx)("a",{className:"download",download:n,href:`${o}&download=true`,children:(0,v.jsx)(ge.Z,{})})]}),x&&(0,v.jsx)("div",{className:"preview",children:p})]})};let ve;function we(e){let{fileMessages:t}=e;const i=(0,l.useRef)(null),[n,s]=(0,l.useState)({}),{message:o,view:d,channelMessage:p}=(0,J.CG)((e=>({message:e.message,channelMessage:e.channelMessage,view:e.ui.fileListView})));return(0,l.useEffect)((()=>{if(d==c.kO.grid&&i){const e=i.current.getBoundingClientRect().width-32,t=Math.floor(e/368),l=e%368,n=Math.max(Math.floor(l/(t-1)),8);ve=new(a())(i.current,{fitWidth:!0,gutter:n,itemSelector:".file_box"})}else ve&&ve.destroy()}),[d,n]),(0,v.jsxs)(r,{children:[(0,v.jsx)(N,{value:n.name,updateSearchValue:e=>{s((t=>({...t,name:e})))}}),(0,v.jsx)("div",{className:"divider"}),(0,v.jsxs)("div",{className:"opts",children:[(0,v.jsx)(Q,{filter:n,updateFilter:e=>{s((t=>({...t,...e})))}}),(0,v.jsx)(j,{view:d})]}),(0,v.jsx)("div",{className:`list ${d}`,ref:i,children:t.map((e=>{const t=o[e];if(!t)return null;const i=((e,t,i)=>{let l=!0;const{mid:n,file_type:a,created_at:s,from_uid:r,properties:o}=e,{name:c,type:d,date:p,from:x,channel:h}=t,u=o?o.name:"";if(x&&x!=r&&(l=!1),h&&-1==i[h].findIndex((e=>e==n))&&(l=!1),c){let e=["",...c.toLowerCase(),""].join(".*");new RegExp(e).test(u)||(l=!1)}return l})(t,n,p);if(!i)return null;const{mid:l,content:a,created_at:s,from_uid:r,properties:x}=t,{name:h,content_type:u,size:f}=null!==x&&void 0!==x?x:{};return(0,v.jsx)(be,{preview:d==c.kO.grid,flex:d==c.kO.item,file_type:u,content:a,created_at:s,from_uid:r,size:f,name:h},l)}))})]})}const je=(0,l.memo)(we,((e,t)=>{return i=e.fileMessages,l=t.fileMessages,i.length===l.length&&i.every(((e,t)=>e==l[t]));var i,l}))},562:(e,t,i)=>{e.exports=i.p+"static/media/search.6ee4d07d418f350e5389.svg"}}]);